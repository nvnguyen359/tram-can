<form [formGroup]="form">
    <div class="tram-can-main">
        <div class="head">
            <div class="weight" style="position: relative;">
                <ng-container *ngIf="!isconnect; then thenTemplate; else elseTemplate"></ng-container>
                <ng-template #thenTemplate>
                    <div>
                        <div>
                            <div class="number" [innerHTML]="weight" [style]="{color:colorNum}"></div>
                            <span style="color: aliceblue;font-size: 20px;">Kg</span>
                        </div>
                        <div class="is_connect" (click)="onClickOnOff()">
                            <img src="../../../assets/{{connectImg}}line.png" alt="" class="responsive">
                        </div>
                    </div>
                </ng-template>
                <ng-template #elseTemplate>
                    <div class="ketnoican" matRipple [matMenuTriggerFor]="menu">
                        <mat-icon>cast_connected</mat-icon>
                        <div>Kết Nối Với Cân</div>
                    </div>
                </ng-template>

            </div>
            <div class="infor-status">
                <div class="flex kl1 k">
                    <mat-form-field class="small">
                        <mat-label>Khối Lượng Lần 1:</mat-label>
                        <input matInput type="number" formControlName="weight1">
                        @if (form.value.weight1) {
                        <button matSuffix mat-icon-button aria-label="Clear" (click)="form.controls['weight1'].setValue('')">
                            <mat-icon>close</mat-icon>
                        </button>
                        }
                    </mat-form-field>
                    <div style="margin-left: -1px;    font-weight: 700;">Kg</div>
                </div>
                <div class="flex kl1 k">
                    <mat-form-field class="example-form-field">
                        <mat-label>Khối Lượng Lần 2:</mat-label>
                        <input matInput type="number" formControlName="weight2">
                        @if (form.value.weight2) {
                        <button matSuffix mat-icon-button aria-label="Clear" (click)="form.controls['weight2'].setValue('')">
                            <mat-icon>close</mat-icon>
                        </button>
                        }
                    </mat-form-field>
                    <div style="margin-left: -1px;    font-weight: 700;">Kg</div>
                </div>
                <!-- <hr>
                <div class="flex center">
                    <mat-icon aria-hidden="false"> check_circle</mat-icon>
                    <span>ket noi thanh cong</span>
                </div> -->
            </div>
            <div class="info-weight-product">
                <h5 style="color: darkorange;">Khối Lượng Hàng</h5>
                <div style="font-size: 28px;" [innerText]="obj.cargoVolume">25000Kg</div>
            </div>
            <app-upsert-tram-can style="margin-top: 8px;" (outputTramCan)="outputTramCan($event)"
                [obj]="obj"></app-upsert-tram-can>
        </div>
  
        <section class="sl-can" aria-disabled="true">
            <div class="left">
                <button mat-flat-button color="primary" style="border: 1px soild red;"
                    (click)="btCanXeClick()"><span>Chốt Cân
                        Xe</span>
                    <mat-icon>autorenew</mat-icon></button>

            </div>

            <div class="right">
                <button [disabled]="disabled" mat-flat-button color="accent"
                    (click)="savePrint()"><mat-icon>printer</mat-icon><span>Lưu và In</span></button>
                <button mat-flat-button [disabled]="disabled" color="primary"
                    (click)="save()"><mat-icon>save</mat-icon><span>Lưu</span></button>
                <button mat-flat-button color="warn" [disabled]="disabled"
                    (click)="save(false)"><mat-icon>book</mat-icon><span>Lưu Nháp</span></button>
                <button mat-flat-button color="accent">Xóa
                    &nbsp;<mat-icon>delete</mat-icon></button>
            </div>
        </section>
    </div>

</form>
<br>

<app-expansion-table [options]="optionsTable" (eventUpsert)="eventUpsertTable($event)"></app-expansion-table>
<mat-menu #menu="matMenu">
    <button *ngFor="let item of ports" mat-menu-item (click)="onChange(item)">
        <div style="display: block;">{{item.path}}</div><small
            style="font-size: 10px;color:blueviolet">{{item.friendlyName}}</small>
    </button>

</mat-menu>